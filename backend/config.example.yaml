server:
  address: ":8080"
  read_timeout_seconds: 10
  write_timeout_seconds: 0
  idle_timeout_seconds: 60
  audit_logs: true

auth:
  keycloak_url: "https://keycloak.enterprise.com"
  realm: "monitoring"
  client_id: "kubelens"
  client_secret: "9NIzSlYlsPIMfHCnH82ObwvBeRnKqy7g"
  allowed_groups:
    - "k8s-logs-access"
  allowed_secrets_groups:
    - "k8s-admin-access"

logs:
  default_tail_lines: 10000
  max_tail_lines: 10000
  max_line_length: 10000
  app_stream_resync_seconds: 10
  worker_idle_ttl_seconds: 60
  worker_buffer_lines: 10000
  worker_buffer_max_bytes: 52428800
  subscriber_buffer_lines: 2000
  use_redis_streams: false
  redis_stream_prefix: "kubelens:logs"
  redis_stream_maxlen: 10000
  redis_stream_block_millis: 2000
  redis_lock_ttl_seconds: 15
  redis_url: ""
  rate_limit_per_minute: 120
  rate_limit_burst: 240

session:
  max_bytes: 262144

storage:
  database_url: ""

cache:
  enabled: true
  redis_url: ""

kubernetes:
  cluster_name: "enterprise-cluster"
  terminated_log_ttl: 3600
  api:
    burst: 200
    qps: 100
  api_cache:
    enable_informers: true
    informer_resync_seconds: 30
    pod_list_ttl_seconds: 2
    app_list_ttl_seconds: 5
    crd_list_ttl_seconds: 10
    retry_attempts: 3
    retry_base_delay_ms: 200
    metadata_only: false
  allowed_namespaces:
    - "payment-svc"
    - "inventory-svc"
    - "auth-svc"
  app_groups:
    enabled: true
    labels:
      selector: "app.enterprise.com/group"
      name: "app.enterprise.com/name"
      environment: "app.enterprise.com/environment"
      version: "app.enterprise.com/version"
  pod_filters:
    include_regex: ".*"
    exclude_labels:
      - "component=istio"
      - "heritage=Helm"
  app_filters:
    include_regex: ".*"
    exclude_labels:
      - "component=istio"
      - "heritage=Helm"
  label_prefix: "logger.app.enterprise.com"
  custom_resources:
    - name: "cnpg"
      group: "postgresql.cnpg.io"
      version: "v1"
      resource: "clusters"
      kind: "Cluster"
      enabled: true
      pod_label_key: "cnpg.io/cluster"
    - name: "dragonfly"
      group: "dragonflydb.io"
      version: "v1alpha1"
      resource: "dragonflies"
      kind: "Dragonfly"
      enabled: true
      pod_label_key: "app"
